<div class="container" ng-controller="dashboard" ng-init="loadTickets()">
    <div ng-include="'templates/navigation.html'"></div>
    <h2>Tickets</h2>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <th>ID</th>
                <th>Sender</th>
                <th>Text</th>
                <th>Server</th>
                <th>Reason</th>
                <th>Status</th>
                <th>Created</th>
                <th>Last update</th>
            </thead>
            <tbody>
                <tr ng-repeat="ticket in tickets">
                    <td class="col-md-1"><a ng-href="/#/ticket/{{ticket.uid}}">{{ ticket.uid.substring(0, 8) }}</a></td>
                    <td class="col-md-1">{{ ticket.sender }}</td>
                    <td class="col-md-5">{{ shortenText(ticket.messages[0].text, 80, true) }}</td>
                    <td class="col-md-1">{{ ticket.server }}</td>
                    <td class="col-md-1">{{ ticket.reason }}</td>
                    <td class="col-md-1">{{ ticket.status }}</td>
                    <td class="col-md-1" title="{{ formatTimestamp(ticket.messages[0].timestamp, 'DD.MM HH:mm:ss') }}">
                        {{ formatTimestampRelative(ticket.messages[0].timestamp) }}</td>
                    <td class="col-md-1" title="{{ formatTimestamp(ticket.messages.slice(-1)[0].timestamp, 'DD.MM HH:mm:ss') }}">
                        {{ formatTimestampRelative(ticket.messages.slice(-1)[0].timestamp) }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>